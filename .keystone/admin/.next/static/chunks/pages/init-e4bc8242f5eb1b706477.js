_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[19],{"1H5k":function(e,t,n){"use strict";var r=n("x8tt");n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b})),n.d(t,"c",(function(){return r.c})),n.d(t,"d",(function(){return r.d}))},Ax7X:function(e,t,n){"use strict";n.d(t,"a",(function(){return R})),n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return P}));var r=n("cxan"),a=n("J8OT"),o=n("ERkP"),c=n.n(o),i=n("HbGN"),s=n("Xr+X"),l=n("rkyN"),d=n("ALBq"),u=n("RxMK"),b=n("d01W"),g=n("rjhH"),O=n("3jXu"),j=n("q9nS"),f=n("UgQ6"),m=n.n(f),h=n("4/oc");const p=()=>{var e;const{headingStyles:t}=Object(a.t)(),{adminConfig:n}=Object(O.b)();return null!==(e=n.components)&&void 0!==e&&e.Logo?Object(a.n)(n.components.Logo,null):Object(a.n)(a.f,null,Object(a.n)(m.a,{href:"/",passHref:!0},Object(a.n)("a",{css:{color:t.h3.color,textDecoration:"none"}},"KeystoneJS")))},v=({href:e,children:t})=>{const{palette:n,spacing:r,radii:o,typography:c}=Object(a.t)(),i=Object(s.useRouter)(),l=i.pathname===e||i.pathname.split("/")[1]===e.split("/")[1];return Object(a.n)(j.a,{"aria-current":!!l&&"location",href:e,css:{background:"transparent",borderBottomRightRadius:o.xsmall,borderTopRightRadius:o.xsmall,color:n.neutral700,display:"block",fontWeight:c.fontWeight.medium,marginBottom:r.xsmall,marginRight:r.xlarge,padding:`${r.small}px ${r.xlarge}px`,position:"relative",textDecoration:"none",":hover":{background:n.blue50,color:n.blue500},"&[aria-current=location]":{background:n.neutral200,color:n.neutral900}}},t)},y=({item:e})=>{const{spacing:t,typography:n}=Object(a.t)();return Object(a.n)("div",{css:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between",padding:t.xlarge}},Object(a.n)("div",{css:{fontSize:n.fontSize.small}},"Signed in as ",Object(a.n)("strong",null,e.label)),Object(a.n)(d.a,{placement:"bottom",triggerRenderer:({triggerProps:e})=>Object(a.n)(l.a,Object(r.a)({size:"small",style:{padding:0,width:36},"aria-label":"Links and signout"},e),Object(a.n)(u.a,null))},Object(a.n)(a.j,{gap:"medium",padding:"large",dividers:"between"},Object(a.n)(k,{target:"_blank",href:"/api/graphql"},"API Explorer"),Object(a.n)(k,{target:"_blank",href:"https://github.com/keystonejs/keystone"},"GitHub Repository"),Object(a.n)(k,{target:"_blank",href:"https://www.keystonejs.com/documentation"},"Keystone Documentation"),Object(a.n)(g.a,null))))},k=e=>{let{children:t}=e,n=Object(i.a)(e,["children"]);const{typography:o}=Object(a.t)();return Object(a.n)("a",Object(r.a)({css:{alignItems:"center",display:"flex",fontSize:o.fontSize.small,textDecoration:"none"}},n),t,Object(a.n)(b.a,{size:"small"}))},x=()=>{const{adminMeta:{lists:e},authenticatedItem:t,visibleLists:n}=Object(O.b)();return Object(a.n)("div",{css:{display:"flex",flexDirection:"column",justifyContent:"center"}},"authenticated"===t.state&&Object(a.n)(y,{item:t}),Object(a.n)("nav",null,Object(a.n)(v,{href:"/"},"Dashboard"),"loading"===n.state?null:"error"===n.state?Object(a.n)("span",{css:{color:"red"}},n.error instanceof Error?n.error.message:n.error[0].message):Object.keys(e).map((t=>{if(!n.lists.has(t))return null;const r=e[t];return Object(a.n)(v,{key:t,href:`/${r.path}`},e[t].label)}))))},w=80,E=e=>Object(a.n)(o.Fragment,null,Object(a.n)("style",null,"body { overflow: hidden; }"),Object(a.n)("div",Object(r.a)({css:{display:"grid",gridTemplateColumns:"minmax(300px, 1fr) 4fr",gridTemplateRows:`${w}px auto`,height:"100vh"}},e))),S=e=>Object(a.n)("aside",Object(r.a)({css:{minWidth:0,overflowY:"auto",WebkitOverflowScrolling:"touch"}},e)),C=e=>{const{colors:t,spacing:n}=Object(a.t)();return Object(a.n)("main",Object(r.a)({css:{backgroundColor:t.background,boxSizing:"border-box",minWidth:0,paddingLeft:n.xlarge,paddingRight:n.xlarge,overflowY:"auto",WebkitOverflowScrolling:"touch"}},e))},P=({children:e,header:t})=>{const{colors:n,spacing:r}=Object(a.t)();return Object(a.n)(E,null,Object(a.n)("div",{css:{alignItems:"center",borderBottom:`1px solid ${n.border}`,display:"flex",justifyContent:"space-between",paddingLeft:r.xlarge,paddingRight:r.xlarge}},Object(a.n)(p,null)),Object(a.n)("header",{css:{alignItems:"center",backgroundColor:n.background,borderBottom:`1px solid ${n.border}`,display:"flex",justifyContent:"space-between",minWidth:0,paddingLeft:r.xlarge,paddingRight:r.xlarge}},t),Object(a.n)(S,null,Object(a.n)(x,null)),Object(a.n)(C,null,e))};function R({errors:e,networkError:t}){return t?c.a.createElement(h.a,{tone:"negative"},t.message):null!==e&&void 0!==e&&e.length?c.a.createElement(a.j,{gap:"small"},e.map((e=>{var t,n;const r=e;return"ValidationFailureError"===e.name&&null!==(t=r.data)&&void 0!==t&&null!==(n=t.messages)&&void 0!==n&&n.length?r.data.messages.map((e=>c.a.createElement(h.a,{tone:"negative"},e))):c.a.createElement(h.a,{tone:"negative"},e.message)}))):null}},RxMK:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("ERkP"),a=(n("97Jx"),n("m3Bd"),n("J8OT"),n("s3d4"));const o=Object(a.a)(Object(r.createElement)(r.Fragment,null,Object(r.createElement)("circle",{cx:12,cy:12,r:1}),Object(r.createElement)("circle",{cx:19,cy:12,r:1}),Object(r.createElement)("circle",{cx:5,cy:12,r:1})),"MoreHorizontalIcon")},ZP4Z:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n("Czhu"),a=n("ERkP"),o=n("b2e3"),c=n.n(o),i=n("J8OT"),s=n("olln"),l=n("yTkC"),d=n("+C6t"),u=n("xiH9"),b=n("Z4DO"),g=n("3jXu"),O=n("Ax7X");function j({listKey:e,onClose:t,onCreate:n}){const{createViewFieldModes:o}=Object(g.b)(),j=Object(g.c)(e),f=Object(l.b)(),[m,{loading:h,error:p}]=Object(u.a)(b.d`mutation($data: ${j.gqlNames.createInputName}!) {
      item: ${j.gqlNames.createMutationName}(data: $data) {
        id
        label: ${j.labelField}
    }
  }`),[v,y]=Object(a.useState)((()=>{const e={};return Object.keys(j.fields).forEach((t=>{e[t]=j.fields[t].controller.defaultValue})),e})),k=Object(a.useMemo)((()=>{const e=new Set;return Object.keys(v).forEach((t=>{const n=v[t],r=j.fields[t].controller.validate;if(r){!1===r(n)&&e.add(t)}})),e}),[j,v]),[x,w]=Object(a.useState)(!1),E=Object.keys(j.fields).filter((t=>"loaded"===o.state&&"hidden"!==o.lists[e][t])).map(((e,t)=>{const n=j.fields[e];return Object(i.n)(n.views.Field,{key:e,field:n.controller,value:v[e],forceValidation:x&&k.has(e),onChange:t=>{y(Object(r.a)(Object(r.a)({},v),{},{[e]:t}))},autoFocus:0===t})}));return Object(i.n)(s.b,{title:`Create ${j.singular}`,width:"wide",actions:{confirm:{label:`Create ${j.singular}`,loading:h,action:()=>{const e=0!==k.size;if(w(e),e)return;const t={};Object.keys(j.fields).forEach((e=>{const{controller:n}=j.fields[e],r=n.serialize(v[e]);c()(r,n.serialize(n.defaultValue))||Object.assign(t,r)})),m({variables:{data:t}}).then((({data:e})=>{const t=e.item.label||e.item.id;n({id:e.item.id,label:t}),f.addToast({title:t,message:"Created Successfully",tone:"positive"})})).catch((()=>{}))}},cancel:{label:"Cancel",action:t}}},"error"===o.state&&Object(i.n)(O.a,{networkError:o.error instanceof Error?o.error:void 0,errors:o.error instanceof Error?void 0:o.error}),"loading"===o.state&&Object(i.n)(d.a,{label:"Loading create form"}),p&&Object(i.n)(O.a,{networkError:null===p||void 0===p?void 0:p.networkError,errors:null===p||void 0===p?void 0:p.graphQLErrors}),Object(i.n)(i.j,{gap:"xlarge",paddingY:"xlarge"},E,0===E.length&&"There are no fields that you can read or edit"))}},biUK:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("cxan"),a=n("HbGN"),o=n("J8OT"),c=n("oGee");n.d(t,"b",(function(){return c.a}));var i=n("jdUm");n.d(t,"d",(function(){return i.a}));var s=n("Ax7X");n.d(t,"e",(function(){return s.a}));var l=n("ZP4Z");n.d(t,"c",(function(){return l.a}));n("q9nS"),n("Xr+X"),n("UgQ6"),n("ERkP"),n("KEM+"),n("rkyN"),n("qfee"),n("ALBq"),n("RxMK"),n("d01W"),n("rjhH"),n("3jXu"),n("yTkC"),n("+C6t"),n("olln"),n("yiKp"),n("yUr7"),n("z3d9"),n("6tix"),n("eecF"),n("4/oc"),n("b2e3");const d=e=>{let{children:t}=e,n=Object(a.a)(e,["children"]);const{spacing:c}=Object(o.t)();return Object(o.n)("div",Object(r.a)({css:{padding:c.small}},n),t)}},d01W:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("ERkP"),a=(n("97Jx"),n("m3Bd"),n("J8OT"),n("s3d4"));const o=Object(a.a)(Object(r.createElement)("polyline",{points:"9 18 15 12 9 6"}),"ChevronRightIcon")},jdUm:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var r=n("zjfJ"),a=n("ERkP"),o=n("rkyN"),c=n("J8OT"),i=n("qfee");class s extends a.Component{constructor(...e){super(...e),Object(r.a)(this,"state",{hasError:!1,isReloading:!1}),Object(r.a)(this,"reloadPage",(()=>{this.setState({isReloading:!0}),window.location.reload()}))}static getDerivedStateFromError(e){return{error:e,hasError:!0}}render(){return this.state.hasError?Object(c.n)(l,null,Object(c.n)(c.j,{align:"center",gap:"medium"},Object(c.n)(i.a,{size:"large"}),Object(c.n)("div",null,"Something went wrong."),Object(c.n)(o.a,{size:"small",isLoading:this.state.isReloading,onClick:this.reloadPage},"reload page"))):this.props.children}}const l=({children:e})=>{const{colors:t,shadow:n}=Object(c.t)();return Object(c.n)(c.b,{css:{minWidth:"100vw",minHeight:"100vh",backgroundColor:t.backgroundMuted},rounding:"medium"},Object(c.n)(c.a,{css:{background:t.background,boxShadow:n.s100},margin:"medium",padding:"xlarge",rounding:"medium"},e))}},oGee:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("cxan"),a=n("J8OT"),o=n("q9nS");const c=e=>{const{colors:t,spacing:n}=Object(a.t)();return Object(a.n)(o.a,Object(r.a)({css:{color:t.foreground,display:"block",padding:n.small,textDecoration:"none",":hover":{textDecoration:"underline"}}},e))}},pfvO:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("J8OT");const a=({children:e})=>{const{colors:t,shadow:n}=Object(r.t)();return Object(r.n)(r.b,{css:{minWidth:"100vw",minHeight:"100vh",backgroundColor:t.backgroundMuted},rounding:"medium"},Object(r.n)(r.a,{css:{background:t.background,minWidth:600,boxShadow:n.s100},margin:"medium",padding:"xlarge",rounding:"medium"},e))}},rjhH:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("J8OT"),a=n("rkyN"),o=n("ERkP"),c=n("Z4DO"),i=n("xiH9");const s=c.d`
  mutation EndSession {
    endSession
  }
`,l=({children:e})=>{const[t,{loading:n,data:c}]=Object(i.a)(s);return Object(o.useEffect)((()=>{null!==c&&void 0!==c&&c.endSession&&window.location.reload()}),[c]),Object(r.n)(a.a,{size:"small",isLoading:n,onClick:()=>t()},e||"Sign out")}},s8SO:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var r=n("ERkP"),a=n.n(r),o=n("J8OT"),c=n("rkyN"),i=n("3jXu"),s=n("b2e3"),l=n.n(s),d=n("pfvO"),u=n("1H5k"),b=n("q9nS"),g=n("biUK"),O=n("eecF");const j=({fieldPaths:e,listKey:t})=>{var n;const{adminMeta:a}=Object(i.b)(),s=Object(r.useMemo)((()=>{const n={};return e.forEach((e=>{n[e]=a.lists[t].fields[e]})),n}),[e]),[j,f]=Object(r.useState)((()=>{let e={};return Object.keys(s).forEach((t=>{e[t]={kind:"value",value:s[t].controller.defaultValue}})),e})),m=Object(O.g)(s,j),[h,p]=Object(r.useState)(!1),[v,{loading:y,error:k,data:x}]=Object(u.c)(u.a`mutation($data: CreateInitial${t}Input!) {
    authenticate: createInitial${t}(data: $data) {
      ... on ${t}AuthenticationWithPasswordSuccess {
        item {
          id
        }
      }
    }
  }`),w=Object(i.e)(),E=Object(b.b)(),S=Object(i.d)();return Object(r.useEffect)((()=>{"authenticated"===S.authenticatedItem.state&&E.push(E.query.from||"/")}),[S.authenticatedItem,E.query.from]),Object(o.n)(d.a,null,Object(o.n)(o.e,null,"Welcome to KeystoneJS"),Object(o.n)("p",null,"Get Started by creating the first user:"),Object(o.n)("form",{onSubmit:e=>{e.preventDefault();const t=0!==m.size;if(p(t),t)return;const n={},r=Object(O.e)(s,j);Object.keys(r).forEach((e=>{const{controller:t}=s[e],a=r[e];l()(a,t.serialize(t.defaultValue))||Object.assign(n,a)})),v({variables:{data:n}}).then((()=>{w(),E.push("/")})).catch((()=>{}))}},Object(o.n)(o.j,{gap:"large"},k&&Object(o.n)(g.e,{errors:null===k||void 0===k?void 0:k.graphQLErrors,networkError:null===k||void 0===k?void 0:k.networkError}),Object(o.n)(O.a,{fields:s,fieldModes:null,forceValidation:h,invalidFields:m,onChange:f,value:j}),Object(o.n)(c.a,{isLoading:y||(null===x||void 0===x||null===(n=x.authenticate)||void 0===n?void 0:n.__typename)===`${t}AuthenticationWithPasswordSuccess`,type:"submit",weight:"bold",tone:"active"},"Get started"))))},f=["name","email","password"];function m(){return a.a.createElement(j,{listKey:"User",fieldPaths:f,showKeystoneSignup:!0})}},wUCk:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/init",function(){return n("s8SO")}])},x8tt:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.gql})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l.a})),n.d(t,"d",(function(){return d.a}));var r=n("AMm6"),a=n("pQ1H"),o=n("g6u8"),c=n("ERkP"),i=n("minz");function s(){var e=c.useContext(Object(i.a)()).client;return __DEV__?Object(a.b)(e,"No Apollo Client instance can be found. Please ensure that you have called `ApolloProvider` higher up in your tree."):Object(a.b)(e,36),e}var l=n("xiH9"),d=n("GBwV");__DEV__?Object(a.b)("boolean"===typeof o.a,o.a):Object(a.b)("boolean"===typeof o.a,37)},yiKp:function(e,t,n){var r=n("KEM+");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.default=e.exports,e.exports.__esModule=!0}},[["wUCk",0,1,2,3,4]]]);